https://filmslist-e1454.web.app/
---
# Список фильмов
Приложение позволяет просматривать информацию о фильмах, организованную в виде записей таблицы, добавлять новые и удалять имеющиеся записи.
## Описание приложения
Задание было выполнено с использованием **React**, стилизация всех элементов страницы, а так же модальное окно, сделано с помощью компонентов из фреймворка **Semantic UI**, для получения данных из форм модального окна используется библиотека **Formik**, а для их валидации **Yup**. Все данные для записей о фильмах хранятся в облачной базе данных **Cloud Firestore**. Хостинг осуществляется с помощью **Firebase Hosting**.
> На самом деле большая часть из используемых инструментов не являются необходимыми: объект **document** содержит все необходимые методы и свойства, которых было бы достаточно для огранизации добавления/удаления записей, получения введенных значений из форм и их валидаци. А **LocalStorage** мог бы заменить базу данных. Опыт написания приложения без вышеперечисленных инструментов **[имеется](https://github.com/qbLua/calc)** (это было давно, а о чистоте и правильности кода я тогда не задумывался).

### Компоненты приложения
Все видимые элементы на страницы находятся внутри компоненты **Main** в файле *[main.jsx](src\components\main.jsx)*
Помимо двух компонент с кнопкой для добавления и таблицей, данная компонента содержит функцию и хук состояния для обновления списка фильмов. 
```javascript
  const [list, setList] = useState([]);
  const getList = () => {
    const listFilms = [];
    db.collection("films").orderBy("dateAdd", "desc").get().then((querySnapshot) => {
      querySnapshot.forEach((doc) => {
        listFilms.push(doc.data())
        listFilms[listFilms.length-1].id = doc.id;
      });
      setList(listFilms)
    });
    console.log(listFilms)
  }
```
Функция *getList* обращается к таблице *films* из базы данных, записи из которой помещает в хук состояния *list*, что заставляет компоненту перерисоваться и отобразить все записи с фильмами. Сортировка полученных записей выполняется по дате добавления записи -- по умолчанию записи в БД  **Cloud Firestore** упорядываются по уникальному идентификатору, поэто чтобы отсортировать записи в порядке их создания, было добавлено поле с датой, которое нигде не отображается и используется только для сортировки.

Компонента **ModalAdd** из файла *[Modal.jsx](src\components\Modal.jsx)* содержит формы модального окна. Поля для ввода содержат простую валидацию, которая не позволяет добавить пустую запись и рейтинг длиной более двух символов. Новая запись не будет напрямую добавлена на страницу приложения, вместо этого она добавится в базу данных, затем в результате запроса к БД будет получен новый список записей, который будет отражен в таблице.

Сам список фильмов находится в компоненте **TableFilms** ([TableFilms.jsx](src\components\tableFilms.jsx)), где каждым отдельным элементом списка является компонента **Item** ([Item.jsx](src\components\Item.jsx)). Каждый элементы списка имеет кнопку для удаления, которая удаляет из БД запись с идентификатором, соответствующим данной записи, и вызывает обновление списка фильмов.

---
> В ближайшее время планирую добавить кнопку для редактирования и улучшить валидацию, так как сейчас валидной будет считаться даже запись вида [1,1.1.1,1,1:1,99]. Считаю, что стоит добавить дополнительные проврки для полей. Так же пока не удалось сделать вывод сообщений, которые бы говорили пользователю о неправильности заполнения форм (сейчас в таком случае кнопка просто не нажимется, что может вызвать недопонимание). В документации **Semantic UI** была описана валидация полей и вывод сообщений, но примеры требовали установки **jQuery** -- мне показалось, что это будет лишним для такого небольшого приложения и я хочу найти способ сделать это другим способом.